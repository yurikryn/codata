<!DOCTYPE html>
<html>

<body>
	<button id="save-button">Save to file</button>
	<a id="save-anchor" hidden></a>
	<pre id="view"></pre>

	<script src="codata2018.js"></script>
	<script src="codata_object.js"></script>
	<!-- ############################################################################################################################################################################### -->
	<script>
		"use strict";
		const codata2018Object = [];
		const pattern = /^(?<name>[^*].*?)(?:\x20{2,})(?<val>-?\d[.\d\x20]*?)(?:\x20e(?<val_exp>-?\d+))?(?:\x20{2,})(?:\(exact\)|0\.(?<uns_shift>[0\x20]*)(?<unc>[1-9]\d*))(?:\x20e(?<uns_exp>-?\d+))?(?:\x20{2,})(?<unit>.*)$/gm;
		for (let i = 0; i < 400; i++) {
			let res;
			if ((res = pattern.exec(codata2018)) === null) { break; }
			codata2018Object[i] = res.groups;

			const { name, val, val_exp, uns_shift, uns, uns_exp, unit } = codata2018Object[i];
			if (!name || !val) { alert(i + 2); break; }// TEST
			if (val_exp && uns_exp && val_exp !== uns_exp) { alert(i + 2); break; }// TEST
			if (uns_shift === undefined && (uns !== undefined || uns_exp !== undefined)) { alert(i + 2); break; }// TEST

		}
		let j = 0;
		// label:
		for (let entity of codataObject) {
			let k = 0;
			for (let new_entity of codata2018Object) {
				if (new_entity.name === entity.name) {
					++j; ++k;
					if (new_entity.unit && entity.unit !== new_entity.unit) { alert(entity.name); }// TEST
					if (new_entity.val_exp && entity.exponent !== new_entity.val_exp) { alert(entity.name); }// TEST
					break;
				}
			}
			if (k === 0) {
				console.log(entity.name + "    " + entity.value2014);
			}
		}
		//console.log(res.groups);
		//console.dir(i + 2);
		// if( res[1] !== codataObject[i].name){console.log(codataObject[i].name);break;}
		// codataObject[i].value2018 = res[2] + ((res[4] === undefined)? "": "(" + res[4] + ")");
		console.log(j);
		console.log(codataObject.length);
		console.log(codata2018Object.length);
	</script>
	<!-- ############################################################################################################################################################################### -->
	<script src="help_scripts/view_codata_object.js"></script>
	<script src="help_scripts/save_codata_object.js"></script>
</body>

</html>