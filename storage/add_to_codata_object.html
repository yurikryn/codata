<!DOCTYPE html>
<html>

<body>
	<button id="save-button">Save to file</button>
	<a id="save-anchor" hidden></a>
	<pre id="view"></pre>

	<script src="codata2018.js"></script>
	<script src="codata_object.js"></script>
	<!-- ############################################################################################################################################################################### -->
	<script>
		"use strict";
		let j = 0;
		const pattern = /^(?<name>[^*].*?)(?:\x20{2,})(?<val>-?\d[.\d\x20]*?)(?:\x20e(?<val_exp>-?\d+))?(?:\x20{2,})(?:\(exact\)|0\.(?<uns_shift>[0\x20]*)(?<unc>[1-9]\d*))(?:\x20e(?<uns_exp>-?\d+))?(?:\x20{2,})(?<unit>.*)$/gm;
		for (let i = 0; i < 400; i++) {
			let res;
			if ((res = pattern.exec(codata2018)) === null) { break; }
			const { name, val, val_exp, uns_shift, uns, uns_exp, unit } = res.groups;

			if (!name || !val) { alert(i + 2); break; }// TEST
			if (val_exp && uns_exp && val_exp !== uns_exp) { alert(i + 2); break; }// TEST
			if (uns_shift === undefined && (uns !== undefined || uns_exp !== undefined)) { alert(i + 2); break; }// TEST

			for (let entity of codataObject) {
				if (entity.name === name) {
					++j;
					if( unit && entity.unit !== unit){alert(name);}// TEST
					if( val_exp && entity.exponent !== val_exp){alert(name);}// TEST
				} else {
				//	console.log(entity.name);
				}
				
			}
			//console.log(res.groups);
			//console.dir(i + 2);
			// if( res[1] !== codataObject[i].name){console.log(codataObject[i].name);break;}
			// codataObject[i].value2018 = res[2] + ((res[4] === undefined)? "": "(" + res[4] + ")");
		}
		console.log(j);
		console.log(codataObject.length);
	</script>
	<!-- ############################################################################################################################################################################### -->
	<script src="help_scripts/view_codata_object.js"></script>
	<script src="help_scripts/save_codata_object.js"></script>
</body>

</html>